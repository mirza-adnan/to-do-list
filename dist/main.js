(()=>{"use strict";class e{constructor(e,t){this.name=e,this.isDefault=t,this.tasks=[]}get getName(){return this.name}get getTasks(){return this.tasks}setTasks(e){this.tasks=e}addTask(e){this.tasks.some((t=>t.desc===e.desc))?alert("You cannot have two tasks with the same description"):this.tasks.push(e)}removeTask(e){const t=this.tasks.find((t=>{if(t.desc===e)return!0}));this.tasks.splice(this.tasks.indexOf(t),1)}getTask(e){return this.tasks.find((t=>{if(t.desc===e)return!0}))}getCompletedTasks(){return this.tasks.filter((e=>e.isCompleted))}}class t{constructor(e,t){if(this.desc=e,this.isCompleted=!1,t){const e=t.split("-");this.date=`${e[1]}-${e[2]}-${e[0]}`}else this.date="No date"}getDesc(){return this.desc}date(){return this.date}}const c=function(e){localStorage.setItem("app",JSON.stringify(e))},s=function(){return Object.assign(new r,JSON.parse(localStorage.getItem("app")))},n=function(t){const c=t.projects.map((t=>Object.assign(new e,t)));t.setProjects(c)},o=function(e){e.projects.forEach((e=>{const c=e.tasks.map((e=>Object.assign(new t,e)));e.setTasks(c)}))};class r{constructor(){this.projects=[],this.projects.push(new e("Inbox",!0))}get getProjects(){return this.projects}addProject(e){this.projects.some((t=>e.getName===t.getName))?alert("You cannot have two projects with the same name"):this.projects.push(e)}removeProject(e){const t=this.projects.find((t=>t.getName===e));this.projects.splice(this.projects.indexOf(t),1)}setProjects(e){this.projects=e}getProject(e){return this.projects.find((t=>t.getName===e))}}const a=function(){let e;return localStorage.getItem("app")?(e=s(),n(e),o(e)):(e=new r,c(e)),e}();function i(){const e=document.querySelectorAll(".project-delete-icon"),t=document.querySelector(".project-title"),s=document.querySelectorAll(".new-project");let n=!1;function o(){n=!0;const e=this.parentNode.querySelector("p");a.removeProject(e),c(a),h()}function r(){if(n)return document.querySelector("#inbox").click(),void(n=!1);p(this),k(),t.textContent=this.querySelector("p").textContent,u()}e.forEach((e=>{e.addEventListener("click",o)})),s.forEach((e=>{e.addEventListener("click",r)}))}function d(){const e=document.querySelectorAll(".checkbox"),t=document.querySelectorAll(".delete-task"),s=m();function n(){this.parentNode.parentNode.classList.add("completed");const e=this.parentNode.parentNode.querySelector(".task-desc").textContent;s.getTask(e).isCompleted=!0,k(),c(a)}function o(){const e=this.parentNode.parentNode.querySelector(".task-desc").textContent;s.removeTask(e),this.parentNode.parentNode.remove(),c(a)}e.forEach((e=>{e.addEventListener("click",n)})),t.forEach((e=>{e.addEventListener("click",o)}))}function l(){const e=document.querySelector(".add-task"),t=document.querySelector(".task-form"),c=document.querySelector(".task-desc-input"),s=document.querySelector(".task-date-input");e.classList.toggle("display-none"),t.classList.toggle("display-none"),c.value="",c.focus(),s.value=""}function u(){const e=document.querySelector(".add-task"),t=document.querySelector(".task-form");"Today"===m().name||"This Week"===m().name?e.classList.add("display-none"):e.classList.remove("display-none"),t.classList.add("display-none")}function m(){return a.getProject(document.querySelector(".active").querySelector("p").textContent)}function p(e){const t=document.querySelectorAll(".project");e.classList.add("active"),t.forEach((t=>{t!==e&&t.classList.remove("active")}))}function k(){document.querySelector(".tasks").textContent="",f(),d()}function f(){const e=document.querySelector(".tasks"),t=m();t.tasks.forEach((t=>{if(!t.isCompleted){const c=document.createElement("li");c.className="task",c.innerHTML=`<div class="task-wrapper">\n      <img class="checkbox" src="img/circle.svg" alt="">\n      <p class="task-desc">${t.desc}</p>\n      </div>\n      <p class="task-date">${t.date}</p>\n      <div class="task-buttons">\n        <img class="task-button delete-task" src="./img/delete.svg" alt="">\n      </div>`,e.appendChild(c)}})),t.tasks.forEach((t=>{if(t.isCompleted){const c=document.createElement("li");c.className="task completed",c.innerHTML=`<div class="task-wrapper">\n      <img class="checkbox" src="img/circle.svg" alt="">\n      <p class="task-desc">${t.desc}</p>\n      </div>\n      <p class="task-date">${t.date}</p>\n      <div class="task-buttons">\n        <img class="task-button delete-task" src="./img/delete.svg" alt="">\n      </div>`,e.appendChild(c)}}))}function h(){document.querySelector(".new-projects").textContent="",g(),i()}function g(){const e=document.querySelector(".new-projects");a.projects.forEach((t=>{if(!t.isDefault){const c=document.createElement("li");c.className="project new-project",c.innerHTML=`<div class="new-project-name">\n          <img src="./img/folder.svg" alt=""> \n          <p>${t.name}</p>\n        </div>\n        <img class="project-delete-icon" src="./img/delete.svg" alt="">`,e.appendChild(c)}}))}document.querySelector(".hamburger").addEventListener("click",(()=>{document.querySelector("nav").classList.toggle("nav-adjust"),document.querySelector("main").classList.toggle("main-adjust")})),function(){const e=document.querySelector(".default-projects");a.getProjects.forEach((t=>{t.isDefault&&e.appendChild(function(e){const t=document.createElement("li");return t.className="project default","Inbox"===e.getName&&(t.setAttribute("id","inbox"),t.classList.add("active"),t.innerHTML='<img src="./img/inbox.svg" alt=""> <p>Inbox</p>'),t}(t))}))}(),g(),function(){const t=document.querySelector(".new-project-btn"),s=document.querySelector(".project-form"),n=document.querySelector(".project-name-input"),o=document.querySelector(".add-project-btn"),r=document.querySelector(".cancel-project-btn");function i(){n.value="",t.classList.toggle("display-none"),s.classList.toggle("display-none"),n.focus()}t.addEventListener("click",i),r.addEventListener("click",i),o.addEventListener("click",(function(){const t=n.value;if(""===n)return void alert("You have to name your project");const s=new e(t,!1);a.addProject(s),c(a),i(),h()}))}(),i(),function(){const e=document.querySelector("#inbox"),t=document.querySelector(".project-title");e.addEventListener("click",(()=>{p(e),k(),t.textContent=e.querySelector("p").textContent,u()}))}(),function(){const e=document.querySelector(".add-task"),s=(document.querySelector(".task-form"),document.querySelector(".task-desc-input")),n=document.querySelector(".task-date-input"),o=document.querySelector(".task-add"),r=document.querySelector(".task-cancel");e.addEventListener("click",l),r.addEventListener("click",l),o.addEventListener("click",(function(){const e=s.value;if(""===e)return void alert("You have to provide a task description");const o=document.querySelector(".active").querySelector("p").textContent,r=a.getProject(o),i=n.value,d=new t(e,i);r.addTask(d),l(),c(a),k()}))}(),f(),d(),document.querySelector(".clear-completed").addEventListener("click",(function(){const e=m();e.getCompletedTasks().forEach((t=>{e.removeTask(t)})),c(a),k()})),function(){const e=document.querySelector(".project-name-input"),t=document.querySelector(".add-project-btn"),c=document.querySelector(".task-desc-input"),s=document.querySelector(".task-date-input"),n=document.querySelector(".task-add");window.addEventListener("keydown",(o=>{"Enter"===o.key&&(document.activeElement===e?t.click():document.activeElement!==c&&document.activeElement!==s||n.click())}))}()})();